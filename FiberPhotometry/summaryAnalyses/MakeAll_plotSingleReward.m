
% directories with no novelty, no double

directory = [ ...
    {'R:\McKenzieLab\DANEHippocampalResponse\DA2h3\LinearTrack\DA2h3-220610-094056'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\DA2h3\LinearTrack\DA2h3-220614-144826'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\DA2h3\LinearTrack\DA2h3-220615-131710'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\DA2h3\LinearTrack\DA2h3-220621-135231'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\DA2h3\LinearTrack\DA2h3-220629-094637'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\DA2h4\LinearTrack\DA2h4-220610-153155'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\DA2h4\LinearTrack\DA2h4-220613-102344'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\DA2h4\LinearTrack\DA2h4-220614-134841'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\DA2h4\LinearTrack\DA2h4-220621-120025'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\DA2h4\LinearTrack\DA2h4-220628-142830'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\DA2h4\LinearTrack\DA2h4-220629-103417'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h2 (Named NE2m3)\LinearTrack\NE2h2-220610-144237'}; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h2 (Named NE2m3)\LinearTrack\NE2h2-220613-120043'}; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h2 (Named NE2m3)\LinearTrack\NE2h2-220614-084734'}; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h2 (Named NE2m3)\LinearTrack\NE2h2-220621-092339'}; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h2 (Named NE2m3)\LinearTrack\NE2h2-220628-094815'}; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h2 (Named NE2m3)\LinearTrack\NE2h2-220629-111013'}; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h4\LinearTrack\NE2h4-220610-112939'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h4\LinearTrack\NE2h4-220613-131927'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h4\LinearTrack\NE2h4-220614-120651'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h4\LinearTrack\NE2h4-220621-101237'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h4\LinearTrack\NE2h4-220628-125609'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h4\LinearTrack\NE2h4-220629-115637'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h8\LinearTrack\NE2h8-220609-143123'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h8\LinearTrack\NE2h8-220610-103057'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h8\LinearTrack\NE2h8-220613-141033'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h8\LinearTrack\NE2h8-220614-100329'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h8\LinearTrack\NE2h8-220621-105624'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h8\LinearTrack\NE2h8-220628-134009'              }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h6\Linear Track\NE2h6-220701-153039'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h6\Linear Track\NE2h6-220705-093725'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h6\Linear Track\NE2h6-220706-102921'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h6\Linear Track\NE2h6-220707-134118'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h6\Linear Track\NE2h6-220708-090805'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h6\Linear Track\NE2h6-220711-093359'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h6\Linear Track\NE2h6-220712-092311'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h6\Linear Track\NE2h6-220713-093159'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h6\Linear Track\NE2h6-220714-100059'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h6\Linear Track\NE2h6-220715-085418'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h6\Linear Track\NE2h6-220719-085730'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h7\Linear Track\NE2h7-220701-160830'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h7\Linear Track\NE2h7-220705-101455'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h7\Linear Track\NE2h7-220706-091809'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h7\Linear Track\NE2h7-220707-170340'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h7\Linear Track\NE2h7-220708-094738'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h7\Linear Track\NE2h7-220711-101116'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h7\Linear Track\NE2h7-220712-100758'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h7\Linear Track\NE2h7-220713-101011'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h7\Linear Track\NE2h7-220714-103922'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h7\Linear Track\NE2h7-220715-092838'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h7\Linear Track\NE2h7-220719-093035'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h9\Linear Track\NE2h9-220701-164020'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h9\Linear Track\NE2h9-220705-105422'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h9\Linear Track\NE2h9-220706-095204'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h9\Linear Track\NE2h9-220707-173650'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h9\Linear Track\NE2h9-220708-102658'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h9\Linear Track\NE2h9-220711-105246'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h9\Linear Track\NE2h9-220712-104248'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h9\Linear Track\NE2h9-220713-104549'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h9\Linear Track\NE2h9-220714-111338'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h9\Linear Track\NE2h9-220715-100246'             }; ...
    {'R:\McKenzieLab\DANEHippocampalResponse\NE2h9\Linear Track\NE2h9-220719-100541'             }; ...
    ];

nSessions = length(directory);
%%
%clear left right ts_PETH tr
for i = 1:nSessions
    [left{i},right{i},tr{i},ts_PETH{i}]  = plotSingleReward(directory{i});
    i
    
end

%%
kp = ~cellfun(@isempty,tr) & kp_NE';
tr1 = cellfun(@(a) nanPad(a',20)',tr,'uni',0);
figure
for i = 1:20
tmp  = cell2mat(cellfun(@(a) a(i,:),tr1(kp),'uni',0)');
plot((i-1)*(20000+5000) + (1:20000),nanmedian(tmp))
hold on
end


%%
kp_DA = cellfun(@any,regexp(directory,'DA2'));
kp_NE = cellfun(@any,regexp(directory,'NE2'));

%%
for i = 1:2
    
    if  i ==1
        kp = kp_DA;
    else
        kp = kp_NE;
        
    end
    left1 = cellfun(@double,left(kp),'uni',0);
    right1 = cellfun(@double,right(kp),'uni',0);
    
   
    left1 = cell2mat(left1');
    right1 = cell2mat(right1');
    data  =[left1;right1];
    data = nanzscore([left1;right1],[],2);
    h = figure;
    plotMeanSEM(ts_PETH{end},data,'k')
    %ylim([0 .4])
    if i ==1
        saveas(h,'R:\McKenzieLab\DANEHippocampalResponse\Figures\single_reward_mean_DAZ.fig','fig')
        saveas(h,'R:\McKenzieLab\DANEHippocampalResponse\Figures\single_reward_mean_DAZ.png','png')
        saveas(h,'R:\McKenzieLab\DANEHippocampalResponse\Figures\single_reward_mean_DAZ.eps','epsc')
        
        
    else
        saveas(h,'R:\McKenzieLab\DANEHippocampalResponse\Figures\single_reward_mean_NEZ.fig','fig')
        saveas(h,'R:\McKenzieLab\DANEHippocampalResponse\Figures\single_reward_mean_NEZ.png','png')
        saveas(h,'R:\McKenzieLab\DANEHippocampalResponse\Figures\single_reward_mean_NEZ.eps','epsc')
    end
    
    close all
end
